Реалізувати генетичний алгоритм для пошуку максимуму функції (див. свій варіант). Підібрати оптимальні параметри алгоритму. Провести порівняльний аналіз.

**Схема алгоритму з генераційним типом репродукції**

0. Кодування розв’язків
1. Ініціалізація: генерація _N_ особин початкової популяції
2. Моделювання еволюційного процесу (репродукція)
2.1. Оцінювання. Якщо виконується умова зупинки, перехід на п.3
2.2. Відбір _N_ особин до батьківського пулу.
2.3. Застосування генетичних операторів.
2.4. Нове покоління – покоління нащадків. Перехід на п.2.1
3. Завершення роботи

**Схема алгоритму зі стійким типом репродукції**

0. Кодування розв’язків
1. Ініціалізація: генерація _N_ особин початкової популяції
2. Оцінювання.
3. Моделювання еволюційного процесу (репродукція)
3.1. Відбір GG\*_N_ особин до батьківського пулу.
3.2. Застосування генетичних операторів.
3.3. Оцінювання нащадків.
3.4. Відбір _N_ особин в нове покоління.
3.5. Перехід на п.3.1 або п.4.
4. Завершення роботи

### Уточнення кроків алгоритму

#### Кодування

Вузлами дискретизації, 2 знаки після коми (=> ланцюжки довжини _l_\=10, якщо n=1). Розглянути окремо
- стандартний двійковий код
- двійковий код Грея

#### Ініціалізація

Стандартний нормальний розподіл (реалізація: біноміальний з параметром p=0.5, при цьому всі гени генеруються випадково, 0 або 1 з ймовірністю 0.5).

**Важливо:** _i_\-ий прогін кожного набору параметрів алгоритму має одну стартову точку (тобто початкові популяції **кожного i-ого прогону** мають бути спільними для всіх ГА, початкові популяції i-го та j-го прогонів відрізняються).

#### Відбір до батьківського пулу

Див. нижче

#### Генетичні оператори

Кросинговер: одноточковий; стандартний однорідний (standard uniform)

Мутація: щільнісна

#### Умова зупинки

**Умовою зупинки** є

збіжність популяції або проведення максимальної кількості ітерацій (**1 000 000** для генераційного типу репродукції; **GG\*1 000 000** для стійкого типу репродукції, GG – розрив покоління).

**Збіжність** визначається як гомогенність популяції по кожному гену на 99%

АБО

середнє здоров’я популяції не змінюється більше ніж на 0.0001 за останні 10 поколінь (за останні 10\*N/GG поколінь для алгоритмів з стійким типом репродукції**,** GG – розрив покоління).

Перевіряємо всі умови збіжності!

### Налаштування параметрів

1 – Ручне для Функції–1.

Перебрати всі можливі комбінації параметрів, зробити висновки.

2 - Автоматичне для Функції–1 (див. пропоновані системою методи/ модулі**). Якщо немає вбудованих модулів налаштування параметрів генетичного алгоритму, виконуємо ручне налаштування для Функції-2.**

**Проводимо аналіз алгоритму для заданої функції в такому порядку:**

N=100, n=1 – робимо всі прогони, виділяємо найкращий набір параметрів алгоритму

N=100, n=2 – робимо всі прогони, виділяємо найкращий набір параметрів алгоритму, порівнюємо з набором, знайденим для n=1

N=100, n=3 – робимо всі прогони, виділяємо найкращий набір параметрів алгоритму, порівнюємо з набором, знайденим для n=1, n=2

N=100, n=5 – робимо всі прогони, виділяємо найкращий набір параметрів алгоритму, порівнюємо з набором, знайденим для n=1, n=2, n=3

Далі повторюємо наведені кроки для більшої кількості особин в популяції (N=200; N=300; N=400). Порівнюємо додатково набори параметрів, знайдені для популяцій різних розмірів (N).

**Параметри для перебору** включають:

спосіб кодування,

типи кросинговеру,

ймовірності кросинговеру Pc та мутації Pm (див. табл.),

методи відбору (див. табл).

| **Pc** | 0; 0.6; 0.8; 1 | 0; 0.6; 0.8; 1 | 0; 0.6; 0.8; 1 | 0; 0.6; 0.8; 1 |
| --- | --- | --- | --- | --- |
| **Pm** | 0; 0.001; 0.01;<br><br>? 0.1 | 0; 0.0005; 0.005;<br><br>? 0.01; 0.1 | 0; 0.0003; 0.003;<br><br>? 0.01; 0.1 | 0; 0.0002; 0.0005;<br><br>? 0.002; 0.01; 0.1 |
|     |     |     |     |     |

ПРИМІТКА ? означає, що за відсутності збіжності на ВСІХ прогонах із заданим набором параметрів для вказаного значення Pm, на більших значеннях Pm з цим набором параметрів можна прогони не робити

Методи відбору (генераційний тип репродукції):

| **N** | **100** | **200** | **300** | **400** |
| --- | --- | --- | --- | --- |
| **Метод відбору** | SUS<br><br>RWS<br><br>TournWITH_t=2<br><br>TournWITHOUT_t=2<br><br>TournWITHPART_t=2<br><br>ExpRankRWS_c=0.9801<br><br>ExpRankSUS_c=0.9801<br><br>LinRankRWS_beta=2<br><br>LinRankSUS_beta=2<br><br>TournWITH_t=4<br><br>TournWITHOUT_t=4<br><br>ExpRankRWS_c= 0.9606<br><br>ExpRankSUS_c=0.9606<br><br>LinRankRWS_beta=1.6<br><br>LinRankSUS_beta=1.6 | SUS<br><br>RWS<br><br>TournWITH_t=2<br><br>TournWITHOUT_t=2<br><br>TournWITHPART_t=2<br><br>ExpRankRWS_c=0.99003<br><br>ExpRankSUS_c=0.99003<br><br>LinRankRWS_beta=2<br><br>LinRankSUS_beta=2<br><br>TournWITH_t=4<br><br>TournWITHOUT_t=4<br><br>ExpRankRWS_c= 0.98015<br><br>ExpRankSUS_c=0.98015<br><br>LinRankRWS_beta=1.6<br><br>LinRankSUS_beta=1.6 | SUS<br><br>RWS<br><br>TournWITH_t=2<br><br>TournWITHOUT_t=2<br><br>TournWITHPART_t=2<br><br>ExpRankRWS_c=0.99334<br><br>ExpRankSUS_c=0.99334<br><br>LinRankRWS_beta=2<br><br>LinRankSUS_beta=2<br><br>TournWITH_t=4<br><br>TournWITHOUT_t=4<br><br>ExpRankRWS_c=0.98673<br><br>ExpRankSUS_c=0.98673<br><br>LinRankRWS_beta=1.6<br><br>LinRankSUS_beta=1.6 | SUS<br><br>RWS<br><br>TournWITH_t=2<br><br>TournWITHOUT_t=2<br><br>TournWITHPART_t=2<br><br>ExpRankRWS_c=0.99503<br><br>ExpRankSUS_c=0.99503<br><br>LinRankRWS_beta=2<br><br>LinRankSUS_beta=2<br><br>TournWITH_t=4<br><br>TournWITHOUT_t=4<br><br>ExpRankRWS_c=0.99004<br><br>ExpRankSUS_c=0.99004<br><br>LinRankRWS_beta=1.6<br><br>LinRankSUS_beta=1.6 |
|     |     |     |     |     |

Методи відбору (стійкий тип репродукції):

| **N** | **100; 200; 300; 400** |
| --- | --- |
| **GG** | 0.05; 0.1; 0.2; 0.5 |
| **Відбір в Батьківський Пул** | **Elite**: Найкращі - детермінований відбір найкращих GG\*N особин (при цьому всі особини в БП є унікальними)<br><br>**RWS**: Стохастичний відбір найкращих методом RWS (при цьому особина може мати кілька копій в БП) |
| **Відбір в наступне покоління**<br><br>**(або**<br><br>**відбір особин для видалення)** | **WorstComma**: БЕЗ найгірших – детерміноване видалення найгірших особин **з популяції батьків**<br><br>**RandComma**: БЕЗ випадково обраних – видалення випадково (рівномірний розподіл) обраних особин **з популяції батьків**<br><br>**WorstPlus**: БЕЗ найгірших – детерміноване видалення найгірших особин **зі спільної популяції батьків та дітей**<br><br>**RandPlus**: БЕЗ випадково обраних – видалення випадково (рівномірний розподіл) обраних особин **зі спільної популяції батьків та дітей**<br><br>УВАГА: відбір особин на видалення є відбором БЕЗ повернення, тобто з популяції має бути видалено GG\*N різних особин |
|     |     |

**ПРИКЛАД 1**

N=5, GG=0.4

Відбір в БП - Elite

Відбір в Наступне Покоління - WorstComma

Популяція X1, X2, X3, X4, X5; f(X1)>f(X2)>f(X3)>f(X4)>f(X5)

БП: X1, X2 – позначимо нащадків X1’, X2’

Наступне Покоління:

видаляємо найгірших з X1, X2, X3, X4, X5 – т.я. це X4, X5, то наступне покоління складається з X1’, X2’, X1, X2, X3

**ПРИКЛАД 2**

N=5, GG=0.4

Відбір в БП - Elite

Відбір в Наступне Покоління - WorstPlus

Популяція X1, X2, X3, X4, X5; f(X1)>f(X2)>f(X3)>f(X4)>f(X5)

БП: X1, X2 – позначимо нащадків X1’, X2’;

нехай f(X1)> f(X2)>f(X3)>**f(X1’)>f(X4)>f(X2’)>f(X5)**

Наступне Покоління:

видаляємо найгірших з X1, X2, X3, X4, X5, X1’, X2’ – в прикладі це дві особини X5, X2’; отже, нове покоління: X1, X2, X3, X4, X1’

#### Умови збору статистичних даних

Необхідно провести **по NR (Number of Runs) прогонів для кожного набору параметрів** з фіксацією критеріїв, що цікавлять дослідника. Необхідно також надати зведену усереднену інформацію по **NR** прогонах.

**Кількість прогонів на одному наборі параметрів**

Number of Runs: NR=100.

Прогін є **успішним**, якщо

ідентифіковано збіжність алгоритму **та** знайдеться хоча б одна (_найкраща_) особина фінальної популяції, коефіцієнт пристосованості якої є не меншим за δ від його реального значення, та яка розташовується на відстані не більше ніж σ від реального екстремуму; покладемо δ=0.01, σ=0.01 для всіх функцій.

**Критерії:**

**По кожному прогону:**

IsSuc – мітка успішності прогону (1/0)

NI – кількість ітерацій

_NFE_ (_number of fitness function evaluations_) – кількість обчислень функції пристосованості. Зверніть увагу на правильне обчислення значення NFE: не слід переобчислювати коефіцієнт здоров’я однієї й тієї ж особини кілька разів. Зокрема, якщо розрив покоління – одна особина, то при переході до наступного покоління обчислюється тільки здоров’я породжених цією особиною нащадків; здоров’я всіх інших особин було обчислено раніше і не переобчислюється. Для обчислення NFE використовуйте лічильник в програмі.

F_max – коефіцієнт пристосованості найкращого ланцюжка в фінальній популяції

x_max – фенотип найкращого ланцюжка в фінальній популяції

F_avg – середній коефіцієнт пристосованості в фінальній популяції

FC – оцінка збіжності,

_PA_ (_peak accuracy_): .

_DA_ (_distance accuracy_): , де _d_(_x_opt_, _x_max_) – евклідова відстань.

**По всіх NR прогонах:**

Suc – відсоток **успішних** прогонів

На **успішних** прогонах обчислюємо:

- Min_NI, Max_NI, Avg_NI – відповідно мінімальна, максимальна та середня кількість ітерацій до збіжності
- Sigma_NI – стандартне відхилення для NI,

Стандартне відхилення обчислюємо так:

$$\sqrt{\frac{1}{Ns-1}\sum_{i=1}^{Ns}(x_i - avg\_x)^2} \rightarrow \rightarrow (1)$$
$$\text{де } Ns - \text{кількість успішних прогонів (від 0 до NR)}, avg\_x = \frac{1}{N}\sum_{i=1}^{N}x_i$$
- Min_NFE, Max_ NFE, Avg_NFE, Sigma_NFE
- Min_Fmax, Max_ Fmax, Avg_Fmax, Sigma_ Fmax
- Min_Favg, Max_ Favg, Avg_Favg, Sigma_ Favg
- Min_FC, Max_FC, Avg_FC, Sigma_FC
- Min_PA, Max_ PA, Avg_PA, Sigma_ PA
- Min_DA, Max_ DA, Avg_DA, Sigma_ DA

На **НЕуспішних** прогонах обчислюємо всі ті ж критерії, але **з позначкою \_f** (Min_NI_f, Max_NI_f,…):

Результати оформити у вигляді таблиць CSV (№ конфігурації, окремо значення кожного параметру конфігурації, окремо по прогонах значення критеріїв, після 100-го прогону – статистики по 100 прогонах).

Окремо будується зведена таблиця – містить тільки усереднені значення.

Приклад таблиць з минулих років додається (зверніть увагу, що таблиці були розроблені для інших завдань!).

### ФУНКЦІЇ

#### Вар – 2

1: Функція (шляху) Еклі (Ackley’s (Path) function):
$$F_{25}(x_1, x_2, \ldots, x_n) = 20 * exp \left( -0.2 * \sqrt{\frac{1}{n}\sum_{i=1}^{n}x_i^2} \right) + exp \left( \frac{1}{n}\sum_{i=1}^{n}cos(2\pi x_i) \right)$$
$$-5.12 \leq x_i < 5.12, \, i = \overline{1,n}.$$

Глобальний максимум:
$$y = F_{25}(x_1, x_2, \ldots, x_n) = 21, x_i = 0, i = \overline{1,n}.$$

2: Функція Деба 2 (Decreasing maxima, Deb’s test function 2):

$$y = F_{16}(x_1, x_2,..., x_n) = \sum_{i=1}^{n} e^{-2(\ln 2) \left( \frac{x_i-0.1}{0.8} \right)^2} \sin^6 (5\pi x_i), \, 0 \leq x_i < 1.023, \, i = \overline{1,n}.$$

Функція має $5^n$ максимумів різної висоти, що знаходяться на однаковій відстані один від одного. Глобальний максимум: $f(x) \approx 1.0000, \, x_i = 0.1$
